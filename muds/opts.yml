- name: disable_all_services
  type: hidden
  desc: Disable all services
  templates:
    "[[local|localrc]]": "disable_all_services"

- name: admin_password
  type: string
  default: admin_password
  desc: OS administrator password
  templates:
    "[[local|localrc]]": "ADMIN_PASSWORD = {{ data['admin_password'] }}"

- name: mysql
  type: boolean
  default: true
  desc: enable MySQL
  templates:
    "[[local|localrc]]": "{% if data.mysql %}enable_service mysql{% endif -%}"
  children:
    - name: password
      when_parent_is: true
      type: string
      default: secret_mysql
      desc: database password
      templates:
        "[[local|localrc]]": |
          DATABASE_PASSWORD = {{ data['mysql.password'] }}

- name: rabbitmq
  type: boolean
  default: true
  desc: enable RabbitMQ
  templates:
    "[[local|localrc]]": "{% if data.rabbitmq %}enable_service rabbitmq{% endif %}"
  children:
    - name: password
      when_parent_is: true
      type: string
      default: secret_rabbit
      desc: rabbitmq password
      templates:
        "[[local|localrc]]": |
          RABBIT_PASSWORD = {{ data['rabbitmq.password'] }}
